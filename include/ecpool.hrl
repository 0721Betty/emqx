-type callback() :: fun((any()) -> any()).
-type action() :: fun((pid()) -> any()).
-type exec_mode() :: relay | relay_async | {relay_async, callback()} | direct.